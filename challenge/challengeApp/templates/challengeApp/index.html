{% extends 'challengeApp/base.html' %}
{% load static %}
{% load crispy_forms_tags %}


{% block tituloPagina %}
Inicio - Lista de Tareas
{% endblock %}

{% block contenidoPagina %}
<br><br> 
<div class="container-fluid" id="wrapper">
    <section class="bg-white py-5">
        <div class="conteiner px-5">
            <div class="row gx-5 justify-content-center">
                <div class="col-lg-12">
                    <form class="d-flex my-2 my-lg-0" action="" method="post">
                        {% csrf_token %}
                        <input class="flex-grow-0 form-control mr-sm-2" type="search" name="buscar" placeholder="Buscar" aria-label="Search">
                        <button class="btn btn-outline-primary text-nowrap ms-3 my-2 my-sm-0" type="submit"> <i class="bi bi-search"></i> Buscar</button>
                    </form>               
                </div>
            </div>
            <br>
            <h4>
                {% if buscar %}
                Resultado para "{{ busqueda }}":
                {% endif %}
            </h4>
        </div>
    </section>

        <div class="conteiner px-5">
            <div class="row gx-5 justify-content-center">
                <div class="col-lg-12">
                    {% if user.is_authenticated %}
                        <form action="{% url 'crear_tarea' %}" method="POST" role="form" class="d-flex my-2 my-lg-0">
                            {% csrf_token %}
                                {{ form.texto }}
                                <span class="input-group-btn">
                                    <button type="submit" class="btn btn-outline-primary ms-3 my-2 my-sm-0" id="add-btn">Agregar</button>
                                </span>
                        </form>
                    {% endif %}
                </div>
            </div>
        </div>

    <br> <br>

    <ul class="list-group ">
        {% for tarea in tareas %}
            {% if tarea.completada %}
                <li class="list-group-item"> <del> {{ tarea.texto }} </del></li>
            {% else %}
                <a href="{% url 'tarea_lista' tarea.id %}"><li class="list-group-item">{{ tarea.texto }}</li></a>
            {% endif %}
        {% endfor %}
    </ul>

</div>

{% endblock %}

<table class="table table-striped table-hover table-bordered">
    <thead>
        <tr>
            <th scope="col">Completada</th>
            <th scope="col">Titulo</th>
            <th scope="col">Acciones</th>
        </tr>
    </thead>
    <tbody>
        {% for tarea in tareas %}
            <tr>
                <td>
                    {% if tarea.completada %}
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" checked="checked" name="boxes" value="{{tarea.id}}">
                        </div>
                    {% else %}
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="boxes" value="{{tarea.id}}">
                        </div>
                    {% endif %}
                </td>
                <td>{{ tarea.texto }}</td>
                <td>
                    <a class="btn btn-outline-primary text-nowrap ms-3 my-2 my-sm-0" href=" {% url 'editar_tarea' tarea.id %} "> <i class="fas fa-edit"></i> Editar</a>
                    <a class="btn btn-outline-primary text-nowrap ms-3 my-2 my-sm-0" href=" {% url 'eliminar_tarea' tarea.id %} "> <i class="fas fa-trash-alt"></i> Eliminar</a>
                </td>
            </tr>
        {% endfor %}
    </tbody>
</table>


